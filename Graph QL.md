# GraphQL

> GrqphQL이란?
> 기존 REST API 단점을 극복하고 효율성을 개선하기 위해 페이스북에서 개발한 쿼리 언어(Query Language)

## 왜 GraphQL인가?

- 모든 데이터(API)가 **하나의 그래프(graph)**로 연결되어 있으며 쿼리를 통해 특정 데이터만 반환 가능
- 기존의 REST API는 요청 수에 따른 엔드 포인트가 존재하지만 GraphQL은 단 하나의 엔드 포인트만 존재
- 쿼리에 맞는 데이터를 정확하게 리턴하기 때문에 REST API의 가장 큰 문제점을 근본적으로 해결

*※ 엔드포인트는 쉽게 얘기해서 API 요청 경로, 즉 url이라고 할 수 있음*

## REST API의 단점

### Over Fetching

- 필요한 데이터 외에도 별도의 불필요한 데이터까지 함께 반환되는 것
- REST API의 가장 근본적인 문제점이며 서버에 과부하를 초래함
- ex) 유저의 이름만 필요한데 API 요청 시 성별, 나이, 닉네임, 아이디 등의 부수 정보까지 반환받는 경우

### Under Fetching

- 얻고자 하는 목적 데이터를 하나의 API로 얻지 못하고 여러 개의 API를 호출해야 하는 경우,
  하나의 API로는 목적 데이터보다 부족한 데이터를 반환받는 것
- ex) 특정 유저가 쓴 글의 상세 정보를 조회하기 위해,
  유저 정보를 반환하는 API를 호출해서 해당 유저가 쓴 글의 번호를 조회하고,
  그 번호로 다시 해당 글의 상세 정보를 반환하는 API를 호출하게 되는 것

### 무수한 엔드 포인트

- 프런트 엔드에서 데이터가 요구되는 기능을 만들 때마다 백 엔드에서 그에 맞는 API를 만들어야 함
- 버전 관리를 하게 되면 각각의 버전에 따른 엔드 포인트가 배로 증가하기 때문에
  프로젝트 규모가 클 수록 유지 보수하기가 굉장히 어려워짐

## 실습 프로젝트 생성

> movieql폴더 생성 후 필요한 패키지 설치

```bash
$ yarn init
$ yarn graphql-yoga
```

### graphql-yoga

> GraphQL 서버를 쉽게 구축할 수 있게 도와주는 라이브러리
> https://github.com/prisma-labs/graphql-yoga



## Schema

> 사용자에게 보내거나 사용자로부터 받을 데이터에 대한 설명

### Query

> 데이터베이스에서 데이터를 조회할 때만 사용

### Mutation

> 데이터베이스의 데이터를 입력, 수정, 삭제할 때 사용

## resolvers

> query는 Database에게 문제 같은 것이기 때문에 리졸버를 통해서 해당 쿼리를 resolve(해결)해야 함